"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2054],{52054:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(96540),r=a(67438),o=a(84719),s=a(33551),i=a(1043),l=a(94335),u=a(81429),c=a(22492),m=a(46942),p=a.n(m),d=a(8321),f=a(75659);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,s,i=[],l=!0,u=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const y=function(e){var t=e.history,a=e.match,m=g((0,n.useState)(""),2),h=m[0],y=m[1],v=g((0,n.useState)(""),2),w=v[0],x=v[1],b=g((0,n.useState)(""),2),A=b[0],E=b[1],_=g((0,n.useState)(""),2),S=_[0],P=_[1],C=g((0,n.useState)(!1),2),k=C[0],N=C[1],I=g((0,n.useState)([]),2),O=I[0],j=I[1],B=(0,d.wA)();(0,n.useEffect)((function(){var e=a.params.email;x(e)}),[a]);var W=function(e){return O.some((function(t){return t.hasOwnProperty(e)}))?"error":""},z=function(e){return O.some((function(t){return t.hasOwnProperty(e)}))?n.createElement("p",{className:"form-error-messsage"},O[0][e]):""},R=function(e){O.length>0&&O[0].hasOwnProperty(e)&&(delete O[0][e],j(O))};return n.createElement(n.Fragment,null,n.createElement(c.A,{signup:!0}),n.createElement(o.A,{sx:{display:"flex",marginTop:"30px"}},n.createElement(o.A,{sx:{flex:"0.5",marginRight:"50px",marginTop:"50px",fontSize:"19px"}}),n.createElement(o.A,{sx:{flex:"0.5",padding:"20px",borderRadius:"6px",mt:"50px"},className:"_auth__right"},n.createElement(s.A,{variant:"h4"},"Create Password"),n.createElement(s.A,{sx:{marginBottom:"50px"}},"Please set your account password"),n.createElement("form",{className:"",onSubmit:function(e){e.preventDefault(),j([]),N(!0),l.A.post("/api/auth/setup-new-account",{email:w,company_name:h,password:A,password_confirmation:S}).then((function(e){B((0,f.WG)(e.data.token)),B((0,f.gV)(e.data.user)),B((0,f.II)(e.data.companies)),B((0,f.uk)(e.data.new_device)),B((0,f.sr)(e.data.pwd_rotaion)),B((0,f.$e)(e.data.maturity_levels)),B((0,f.UQ)()),B((0,f.mk)()),t.push("/select-organization")})).catch((function(e){N(!1),500===e.response.status&&(j([]),u.hm.error("Server Error, Please contact customer support.","Error")),422===e.response.status&&j(O.concat(e.response.data.errors))}))}},n.createElement(o.A,{sx:{marginBottom:"15px"}},n.createElement(i.A,{fullWidth:!0,label:"Company Name",variant:"outlined",onChange:function(e){y(e.target.value),R(e.target.name)},name:"company_name",value:h,className:p()(W("company_name"),"build__input")}),z("company_name")),n.createElement(o.A,{sx:{marginBottom:"15px"}},n.createElement(i.A,{type:"password",fullWidth:!0,label:"Enter Password",variant:"outlined",onChange:function(e){E(e.target.value),R(e.target.name)},name:"password",value:A,className:p()(W("password"),"build__input")}),z("password")),n.createElement(o.A,{sx:{marginBottom:"15px"}},n.createElement(i.A,{type:"password",fullWidth:!0,label:"Confirm Password",variant:"outlined",onChange:function(e){P(e.target.value),R(e.target.name)},name:"password_confirmation",value:S,className:p()(W("password_confirmation"),"build__input")})),n.createElement(r.A,{type:"submit",size:"large",sx:{paddingRight:"40px",paddingLeft:"40px"},loading:k,loadingIndicator:"Processing...",variant:"contained"},"Save Password")))))}}}]);