"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4466],{14466:(e,t,r)=>{r.r(t),r.d(t,{default:()=>P});var n=r(67294),o=r(14416),a=r(96486),i=r.n(a),s=r(48408),c=r(94379),u=r(99226),l=r(23972),p=r(22715),f=r(69397),d=r(93967),m=r.n(d),y=r(31812),h=r(51493);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function v(e,t,r){return t=S(t),function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(e,x()?Reflect.construct(t,r||[],S(e).constructor):t.apply(e,r))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:String(t)}var j=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(w(r=v(this,t,[e])),"state",{code:"",id:"",errors:[],loading:!1,loading_resend:!1,enable_resend:!0}),O(w(r),"setID",(function(){var e=r.props.match.params.token;i().isEmpty(e)||r.state.id===e||r.setState({id:e})})),O(w(r),"handleChange",(function(e){r.setState(O({},e.target.name,e.target.value));var t=r.state.errors;t.length>0&&t[0].hasOwnProperty(e.target.name)&&(delete t[0][e.target.name],r.setState({errors:t}))})),O(w(r),"handlerInputError",(function(e,t){return e.some((function(e){return e.hasOwnProperty(t)}))?"error":""})),O(w(r),"displayInputError",(function(e,t){return e.some((function(e){return e.hasOwnProperty(t)}))?n.createElement("p",{style:{marginTop:"5px"},className:"form-error-messsage"},e[0][t]):""})),O(w(r),"handleSubmit",(function(e){e.preventDefault(),r.setState({errors:[],loading:!0}),h.Z.post("/api/user/verify-otp",r.state).then((function(e){r.setState({code:"",errors:[],loading:!1}),r.props.setUser(e.data.user),r.props.history.push("/select-organization"),c.fn.success("Multi-Factor Authentication has been successfully configured.","Success")})).catch((function(e){500===e.response.status&&r.setState({errors:[],loading:!1}),422===e.response.status&&r.setState({errors:r.state.errors.concat(e.response.data.errors),loading:!1})}))})),O(w(r),"handleResendVerificationCode",(function(e){e.preventDefault(),r.setState({errors:[],loading_resend:!0}),h.Z.post("/api/user/resend-otp",r.state).then((function(e){r.setState({errors:[],loading_resend:!1}),r.props.setUser(e.data.user),r.props.history.push("/user/verify-phone/".concat(e.data.id))})).catch((function(e){500===e.response.status&&r.setState({errors:[],loading_resend:!1}),422===e.response.status&&r.setState({errors:r.state.errors.concat(e.response.data.errors),loading_resend:!1})}))})),setTimeout(function(){this.setState({enable_resend:!1})}.bind(w(r)),6e4),r.props.setCreateNewOrg({open:!1,in_org:!1}),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){this.setID()}},{key:"componentDidUpdate",value:function(e){this.setID()}},{key:"render",value:function(){var e=this.state,t=e.errors,r=e.loading,o=e.code,a=e.loading_resend;return n.createElement(u.Z,{sx:{display:"flex",marginTop:"30px"}},n.createElement(u.Z,{sx:{flex:"0.5",marginRight:"50px",marginTop:"50px",fontSize:"19px"}}),n.createElement(u.Z,{sx:{flex:"0.5",padding:"20px",borderRadius:"6px",mt:"50px"}},n.createElement(l.Z,{variant:"h4",sx:{color:"#fff"}},"Multi-Factor Authentication"),n.createElement(l.Z,{sx:{marginBottom:"50px",color:"#fff"}},"Enter a verification code"),n.createElement("p",{style:{color:"#fff"}},"Please enter verification code which is sent via SMS on your mobile number, please note verification code will expire in 2 minutes."),n.createElement("form",{className:"",onSubmit:this.handleSubmit},n.createElement(u.Z,{sx:{marginBottom:"15px",width:"45%"}},n.createElement(p.Z,{fullWidth:!0,label:"Verification Code",variant:"outlined",onChange:this.handleChange,name:"code",value:o,className:m()(this.handlerInputError(t,"code"),"build__input")}),this.displayInputError(t,"code")),n.createElement(u.Z,{sx:{display:"flex"}},n.createElement(y.Z,{type:"submit",size:"large",sx:{paddingRight:"40px",paddingLeft:"40px",marginRight:"20px"},loading:r,loadingIndicator:"Verifing...",variant:"contained"},"Verify"),n.createElement(f.Z,{type:"button",size:"large",onClick:this.handleResendVerificationCode,sx:{paddingRight:"40px",paddingLeft:"40px"},disabled:a,variant:"outlined"},"Resend new Code?")))))}}])&&g(r.prototype,o),a&&g(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}(n.Component);const P=(0,o.$j)(null,{setUser:s.av,setCreateNewOrg:s.ZJ})(j)}}]);