"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2082],{22082:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n=r(67294),a=r(14416),o=(r(18839),r(9669)),i=r.n(o),s=r(94379),c=r(25501),l=r(87060),u=r(45697),p=r(99245),m=r.n(p),f=r(99226),d=r(23972),h=r(22715),y=r(80807);const g=function(e){e.signup;return n.createElement("div",{className:"apibuild__header"},n.createElement("div",{className:"header__section"},n.createElement("div",{className:"header__tier"},n.createElement("div",{className:"header__logo"},n.createElement("div",{className:"h_logo"},n.createElement("img",{src:y._8,alt:y._F}))),n.createElement("div",{className:"header__center"}),n.createElement("div",{className:"header__right"}))))};var b=r(93967),v=r.n(b),_=r(31812);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function S(e,t,r){return t=x(t),function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(e,P()?Reflect.construct(t,r||[],x(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function k(e,t,r){return(t=R(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:String(t)}var N=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return k(O(e=S(this,t,[].concat(a))),"state",{email:"",errors:[],loading:!1}),k(O(e),"handleChange",(function(t){e.setState(k({},t.target.name,t.target.value));var r=e.state.errors;r.length>0&&r[0].hasOwnProperty(t.target.name)&&(delete r[0][t.target.name],e.setState({errors:r}))})),k(O(e),"handlerInputError",(function(e,t){return e.some((function(e){return e.hasOwnProperty(t)}))?"error":""})),k(O(e),"displayInputError",(function(e,t){return e.some((function(e){return e.hasOwnProperty(t)}))?n.createElement("p",{className:"form-error-messsage"},e[0][t]):""})),k(O(e),"handleSubmit",(function(t){t.preventDefault();var r=e.props.match.params.portal_link;e.setState({errors:[],loading:!0});var n=!1;"true"===e.props.cookies.get("__CJPPREMERME__".concat(e.state.email))&&(n=!0);var a=e.state.email;i().post("/api/auth/policy-panels-login",{email:a,mfa_remb:n},{headers:{"X-Company-Portal-Link-ID":r}}).then((function(t){var n=new URLSearchParams(e.props.location.search).get("redirect");e.setState({email:""}),e.props.history.push("/".concat(r,"/policy-panels/").concat(t.data.email,"/").concat(t.data.unique_id).concat(m()(n)?"":"?redirect=".concat(n)))})).catch((function(t){e.setState({loading:!1}),500===t.response.status&&(e.setState({errors:[]}),s.fn.error("Server Error, Please contact customer support.","Error")),422===t.response.status&&e.setState({errors:e.state.errors.concat(t.response.data.errors)}),429===t.response.status&&e.setState({errors:e.state.errors.concat(t.response.data.errors)}),404===t.response.status&&s.fn.error(t.response.data.message,"Error")}))})),e}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search);if(m()(this.props.portal_user))e.get("email")&&this.setState({email:window.atob(e.get("email"))});else{var t=e.get("redirect");if(t)this.props.history.push(t);else{var r=this.props.match.params.portal_link;this.props.history.push("/policy-panels/".concat(r,"/introduction"))}}}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e=this.state,t=e.errors,r=e.loading,a=e.email;return n.createElement(n.Fragment,null,n.createElement(g,{signup:!1}),n.createElement(f.Z,{sx:{display:"flex",marginTop:"30px"}},n.createElement(f.Z,{sx:{flex:"0.5",marginRight:"50px",marginTop:"50px",fontSize:"19px",textAlign:"center"}}),n.createElement(f.Z,{sx:{flex:"0.5",padding:"20px",borderRadius:"6px",mt:"50px"},className:"_auth__right"},n.createElement(d.Z,{variant:"h4"},"Policy Panel"),n.createElement(d.Z,{sx:{marginBottom:"50px"}},"Please enter your email to access policy portal."),n.createElement("form",{onSubmit:this.handleSubmit},n.createElement(f.Z,{sx:{"& > :not(style)":{width:"55ch"},marginBottom:"15px"}},n.createElement(h.Z,{label:"E-mail",autoComplete:"true",variant:"outlined",onChange:this.handleChange,name:"email",value:a,className:v()(this.handlerInputError(t,"email"),"build__input")}),this.displayInputError(t,"email")),n.createElement(_.Z,{type:"submit",size:"large",sx:{paddingRight:"40px",paddingLeft:"40px"},loading:r,loadingIndicator:"Generating OTP...",variant:"contained"},"Request OTP")))))}}])&&w(r.prototype,a),o&&w(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(n.Component);k(N,"propTypes",{cookies:(0,u.instanceOf)(c.Z).isRequired});const C=(0,a.$j)((function(e){return{portal_user:e.user.portalUser}}))((0,l.Z)(N))}}]);